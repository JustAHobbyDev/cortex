{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://cortex/contracts/client_onboarding_certification_scorecard_schema_v0.json",
  "title": "Client Onboarding Certification Scorecard Schema v0",
  "description": "Machine-checkable scorecard contract for Cortex client onboarding certification.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "artifact",
    "version",
    "generated_at",
    "client",
    "track",
    "assessment",
    "categories",
    "totals",
    "hard_fail_conditions",
    "status"
  ],
  "properties": {
    "artifact": {
      "const": "client_onboarding_certification_scorecard_v0"
    },
    "version": {
      "const": "v0"
    },
    "generated_at": {
      "type": "string",
      "format": "date-time"
    },
    "client": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "client_id",
        "project_id",
        "project_name"
      ],
      "properties": {
        "client_id": {
          "type": "string",
          "minLength": 1
        },
        "project_id": {
          "type": "string",
          "minLength": 1
        },
        "project_name": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "track": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "variant",
        "start_date",
        "end_date"
      ],
      "properties": {
        "variant": {
          "type": "string",
          "enum": [
            "accelerated",
            "standard",
            "custom"
          ]
        },
        "start_date": {
          "type": "string",
          "format": "date"
        },
        "end_date": {
          "type": "string",
          "format": "date"
        }
      }
    },
    "assessment": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "assessor_name",
        "assessor_role",
        "reviewers"
      ],
      "properties": {
        "assessor_name": {
          "type": "string",
          "minLength": 1
        },
        "assessor_role": {
          "type": "string",
          "minLength": 1
        },
        "reviewers": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string",
            "minLength": 1
          }
        }
      }
    },
    "categories": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "governance_integrity",
        "operational_reliability",
        "team_readiness",
        "documentation_quality"
      ],
      "properties": {
        "governance_integrity": {
          "$ref": "#/$defs/weighted_category"
        },
        "operational_reliability": {
          "$ref": "#/$defs/weighted_category"
        },
        "team_readiness": {
          "$ref": "#/$defs/weighted_category"
        },
        "documentation_quality": {
          "$ref": "#/$defs/weighted_category"
        }
      }
    },
    "totals": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "weighted_score_percent",
        "minimum_required_percent",
        "pass_by_score"
      ],
      "properties": {
        "weighted_score_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "minimum_required_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "pass_by_score": {
          "type": "boolean"
        }
      }
    },
    "hard_fail_conditions": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "required_governance_gate_bypass_detected",
        "unlinked_governance_closure_detected",
        "rollback_drill_failed",
        "triggered"
      ],
      "properties": {
        "required_governance_gate_bypass_detected": {
          "type": "boolean"
        },
        "unlinked_governance_closure_detected": {
          "type": "boolean"
        },
        "rollback_drill_failed": {
          "type": "boolean"
        },
        "triggered": {
          "type": "boolean"
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "status": {
      "type": "string",
      "enum": [
        "pass",
        "fail"
      ]
    },
    "evidence_refs": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "uniqueItems": true
    }
  },
  "$defs": {
    "weighted_category": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "weight_percent",
        "score_percent",
        "minimum_required_percent",
        "pass"
      ],
      "properties": {
        "weight_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "score_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "minimum_required_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "pass": {
          "type": "boolean"
        },
        "notes": {
          "type": "string"
        },
        "evidence_refs": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          },
          "uniqueItems": true
        }
      }
    }
  }
}
